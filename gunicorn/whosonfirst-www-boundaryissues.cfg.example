# http://gunicorn-docs.readthedocs.org/en/latest/configure.html#configuration-file
# -*-python-*-

import os
import multiprocessing
import ConfigParser

import mapzen.whosonfirst.spatial as spatial

boundaryissues_port = 'YOUR-BOUNDARYISSUES-PORT-GOES-HERE'
boundaryissues_root = 'YOUR-BOUNDARYISSUES-WWW-GOES-HERE'
boundaryissues_cfg = 'YOUR-BOUNDARYISSUES-CONFIG-NAME-GOES-HERE'

boundaryissues_cfg = os.path.join(boundaryissues_root, boundaryissues_cfg)

workers = multiprocessing.cpu_count() * 2 + 1
worker_class = "egg:gunicorn#gevent"

cfg = ConfigParser.ConfigParser()
cfg.read(boundaryissues_cfg)

dsn = spatial.cfg2dsn(cfg, 'spatial')
os.environ['WOF_SPATIAL_DSN'] = dsn

os.environ['WOF_SEARCH_HOST'] = cfg.get('search', 'host')
os.environ['WOF_SEARCH_PORT'] = cfg.get('search', 'port')

bind = '127.0.0.1:%s' % boundaryissues_port
chdir = boundaryissues_root
